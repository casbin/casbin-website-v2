---
id: rolemanager-api
title: RoleManager API
description: RoleManager provides interface to define the operations for managing roles. Adding matching function to rolemanager allows using wildcards in role name and domain
keywords:
  - rolemanager
  - API
authors:
  - closetool
  - kiloson-c
---



## ロールマネージャー

RoleManager は、ロールを管理するための操作を定義するインターフェイスを提供します。 rolemanagerに一致する関数を追加すると、ロール名とドメインでワイルドカードを使用できます。

### `AddNamedMatchingFunc()`

AddNamedMatchingFunc add MatchingFunc by ptype to RoleManager. MatchingFunc は、ロールのマッチングを操作するときに動作します。

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    e.AddNamedMatchingFunc("g", "", util.KeyMatch)
    _, _ = e.AddGroupingPolicies([][]string{{"*", "admin", "domain1"}})
    _, _ = e.GetRoleManager().HasLink("bob", "admin", "domain1") // -> true, nil
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await e.addNamedMatchingFunc('g', Util.keyMatchFunc);
    await e.addGroupingPolicies([['*', 'admin', 'domain1']]);
    await e.getRoleManager().hasLink('bob', 'admin', 'domain1');
```

```mdx-code-block
</TabItem>
</Tabs>
```

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    e, _ := casbin.NewEnforcer("path/to/model", "path/to/policy")
    e.AddNamedMatchingFunc("g", "", util.MatchKey)
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    const e = await newEnforcer('path/to/model', 'path/to/policy');
    await e.addNamedMatchingFunc('g', Util.keyMatchFunc);
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `AddNamedDomainMatchingFunc()`

AddNamedDomainMatchingFunc ptype で RoleManager にMatchingFunc を追加します。 `DomainMatchingFunc` は上記の `MatchingFunc` に似ています。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    e, _ := casbin.NewEnforcer("path/to/model", "path/to/policy")
    e.AddNamedDomainMatchingFunc("g", "", util.MatchKey)
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    const e = await newEnforcer('path/to/model', 'path/to/policy');
    await e.addNamedDomainMatchingFunc('g', Util.keyMatchFunc);
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `GetRoleManager()`

GetRoleManager は、 `g` の現在のロールマネージャを取得します。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm := e.GetRoleManager()
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    const rm = await e.getRoleManager();
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm = e.get_role_manager()
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `GetNamedRoleManager()`

GetNamedRoleManager gets the role manager by named ptype.

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm := e.GetNamedRoleManager("g2")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    const rm = await e.getNamedRoleManager("g2");
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm = e.get_named_role_manager("g2")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `SetRoleManager()`

SetRoleManager sets the current role manager for `g`.

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    e.SetRoleManager(rm)
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    e.setRoleManager(rm);
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm = e.set_role_manager(rm)
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `SetNamedRoleManager()`

SetNamedRoleManager sets the role manager by named ptype.

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm := e.SetNamedRoleManager("g2", rm)
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm = e.set_role_manager("g2", rm)
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `Clear()`

すべての保存されたデータをクリアし、ロールマネージャを初期状態にリセットします。


例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.Clear()
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.clear();
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.clear()
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `AddLink()`

AddLinkは2つのロール間で継承リンクを追加します。 role: name1 と role: name2 ドメインは、ロールのプレフィックスです(他の目的で使用できます)。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.AddLink("u1", "g1", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.addLink('u1', 'g1', 'domain1');
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.add_link("u1", "g1", "domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `DeleteLink()`

DeleteLinkは2つのロール間の継承リンクを削除します。 role: name1 と role: name2 ドメインは、ロールのプレフィックスです(他の目的で使用できます)。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.DeleteLink("u1", "g1", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.deleteLink('u1', 'g1', 'domain1');
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.delete_link("u1", "g1", "domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `HasLink()`

HasLinkは、2つのロール間にリンクが存在するかどうかを決定します。 role: name1 は role を継承します: name2 ドメインは、ロールのプレフィックスです(他の目的で使用できます)。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.HasLink("u1", "g1", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.hasLink('u1', 'g1', 'domain1');
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.has_link("u1", "g1", "domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `GetRoles()`

GetRoles は、ユーザーが継承するロールを取得します。 ドメインは、ロールのプレフィックスです(他の目的で使用できます)。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.GetRoles("u1", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.getRoles('u1', 'domain1');
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.get_roles("u1", "domain")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `GetUsers()`

GetUsers は、ロールを継承するユーザーを取得します。 ドメインはユーザーのプレフィックスです(他の目的で使用できます)。

例:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.GetUsers("g1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.getUsers('g1');
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.get_users("g1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `PrintRoles()`

PrintRolesはすべてのロールをログに出力します。

For example:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    rm.PrintRoles()
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
    await rm.printRoles();
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
    rm.print_roles()
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `SetLogger()`

SetLogger はロールマネージャのロガーを設定します。

For example:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    logger := log.DefaultLogger{}
    logger.EnableLog(true)
    rm.SetLogger(&logger)
    _ = rm.PrintRoles()
```

```mdx-code-block
</TabItem>
</Tabs>
```

### `GetDomains()`
GetDomains はユーザーが持つドメインを取得します。

For example:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
    result, err := rm.GetDomains(name)
```

```mdx-code-block
</TabItem>
</Tabs>
```
