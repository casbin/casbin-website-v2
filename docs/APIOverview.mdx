---
id: api-overview
title: API Overview
description: Comprehensive overview of Casbin authorization APIs and their usage patterns\keywords: [Casbin API, authorization API, Enforce methods, policy management, batch operations]
authors: [hsluoyz]
---

This overview demonstrates Casbin API usage patterns without covering installation or underlying mechanisms. Refer to these resources for details: [Installation Guide](/docs/get-started) and [Core Concepts](/docs/how-it-works). This tutorial assumes you have already installed and imported Casbin in your project.

## Core Enforcement APIs

### Basic Enforcement

The primary method for authorization checks is `Enforce()`, which evaluates a request against defined policies:

```go
// Load access control model and policies from files
enforcer, err := casbin.NewEnforcer("./example/model.conf", "./example/policy.csv")
if err != nil {
    log.Fatalf("Initialization error: %s", err)
}

// Check authorization
allowed, err := enforcer.Enforce("alice", "data1", "read")
if err != nil {
    // Handle error
}
if allowed {
    // Permit access
} else {
    // Deny access
}
```

### Extended Enforcement with Explanation

To identify which specific policy allowed a request, use `EnforceEx()`:

```go
allowed, reason, err := enforcer.EnforceEx("amber", "data1", "read")
fmt.Println(allowed, reason) // true [admin data1 read]
```

The `reason` parameter returns the exact policy rule that granted access. In this example, `amber` inherits the `admin` role, triggering the `p, admin, data1, read` policy.

### Advanced Enforcement Methods

Casbin provides specialized enforcement APIs for complex scenarios:

- `EnforceWithMatcher(matcher string, request []interface{}) (bool, error)`
  Uses a custom matcher expression for evaluation

- `EnforceExWithMatcher(matcher string, request []interface{}) (bool, string, error)`
  Combines custom matching with policy explanation

- `BatchEnforce(requests [][]interface{}) ([]bool, error)`
  Processes multiple authorization requests simultaneously

## Policy Management APIs

### Retrieval Operations

These methods extract policy elements and metadata:

```go
// Get all subjects in policies
enforcer, _ := casbin.NewEnforcer("model.conf", "policy.csv")
subjects := enforcer.GetAllSubjects()
fmt.Println(subjects) // [admin alice bob]
```

Key retrieval methods include:

- `GetAllSubjects()`, `GetAllObjects()`, `GetAllActions()`: Retrieve all unique elements
- `GetPolicy()`, `GetFilteredPolicy(fieldIndex int, fieldValues ...string)`: Get policy rules with optional filtering
- `GetGroupingPolicy()`, `GetFilteredGroupingPolicy(fieldIndex int, fieldValues ...string)`: Manage role inheritance rules
- Named variants (e.g., `GetNamedPolicy(ptype string)`): Operate on specific policy types

### Modification Operations

Dynamically update policies at runtime with these methods:

```go
// Add policy
enforcer.AddPolicy("new_user", "data1", "read")

hasPolicy := enforcer.HasPolicy("new_user", "data1", "read")
fmt.Println(hasPolicy) // true

// Remove policy
enforcer.RemovePolicy("alice", "data1", "read")

hasPolicy = enforcer.HasPolicy("alice", "data1", "read")
fmt.Println(hasPolicy) // false

// Update policy
enforcer.UpdatePolicy(
    []string{"new_user", "data1", "read"},
    []string{"new_user", "data1", "write"}
)
```

Batch operations are supported through pluralized methods:

```go
// Batch update policies
enforcer.UpdatePolicies(
    [][]string{{"eve", "data3", "read"}, {"jack", "data3", "read"}},
    [][]string{{"eve", "data3", "write"}, {"jack", "data3", "write"}}
)
```

### Transactional Operations with Ex suffix

The `Ex` series methods continue processing even if some rules already exist:

```go
// Add multiple policies, skipping duplicates
added, err := enforcer.AddPoliciesEx([][]string{
    {"user1", "data1", "read"},
    {"user2", "data2", "write"},
})
```

Key `Ex` methods include `AddPoliciesEx()`, `AddNamedPoliciesEx()`, and `AddGroupingPoliciesEx()`.

## Best Practices

1. **Error Handling**: Always check errors from API calls in production code
2. **Performance**: Use batch operations for multiple changes
3. **Consistency**: When modifying policies in distributed systems, use [Watchers](/docs/watchers) for synchronization
4. **Audit**: Log policy modifications for compliance tracking
