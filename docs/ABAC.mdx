---
id: abac
title: ABAC
description: Casbin's implementation of Attribute-Based Access Control (ABAC) for dynamic authorization decisions using object attributes
keywords: [ABAC, attribute-based access control, Casbin ABAC, dynamic authorization, policy attributes]
authors: [hsluoyz]
---

## What is the ABAC model?

ABAC stands for Attribute-Based Access Control. It allows you to control access using the attributes (properties) of the subject, object, or action, rather than just string values. You may have heard of XACML, a complicated ABAC access control language. Casbin's ABAC, however, is much simpler. In Casbin's ABAC, you can use structs or class instances for model elements instead of strings.

Let's look at the official ABAC example:

```ini
[request_definition]
r = sub, obj, act

[policy_definition]
p = sub, obj, act

[policy_effect]
e = some(where (p.eft == allow))

[matchers]
m = r.sub == r.obj.Owner
```

In the matcher, we access `r.obj.Owner` rather than using `r.obj` directly. The `r.obj` parameter passed to the `Enforce()` method should be a struct or class instance containing attributes, not a simple string. Casbin uses reflection to retrieve attribute values from these instances during policy evaluation.

Here's an example struct definition for `r.obj`:

```go
type testResource struct {
    Name  string
    Owner string
}
```

To pass JSON-formatted objects to the enforcer, first enable JSON support with `e.EnableAcceptJsonRequest(true)`:

```go
e, err := NewEnforcer("examples/abac_model.conf")
if err != nil {
    // Handle initialization error
    log.Fatalf("Failed to create enforcer: %v", err)
}
e.EnableAcceptJsonRequest(true)

data1Json := `{ "Name": "data1", "Owner": "bob"}`

ok, err := e.Enforce("alice", data1Json, "read")
if err != nil {
    // Handle enforcement error
    log.Printf("Authorization check failed: %v", err)
    return
}
```

:::note

Enabling JSON request support typically reduces performance by 10-50% due to JSON parsing overhead. Use native structs instead when performance is critical for your application.

:::

## How to use ABAC?

To implement ABAC in Casbin, follow these steps:

1. Define attribute access in the model matcher using dot notation (e.g., `r.obj.Owner`).
2. Pass struct or class instances containing attributes as parameters to the `Enforce()` method.

:::warning

Currently, only request elements like `r.sub`, `r.obj`, and `r.act` support ABAC attribute access. Policy elements (e.g., `p.sub`) cannot use structured attributes since Casbin policies are stored as flat CSV entries.

:::

:::tip

You can use multiple ABAC attributes in a matcher, e.g., `m = r.sub.Domain == r.obj.Domain && r.sub.Role == "admin"`.

:::

:::tip

If you need to use a comma in a policy that conflicts with CSV's separator, escape it by surrounding the statement with quotation marks. For example, `"keyMatch(\"bob\", r.sub.Role)"` will not be split incorrectly.

:::

## Scaling for Complex ABAC Rules

### Rule Definition in Policies

For systems requiring numerous or complex ABAC rules, define rules in the policy rather than the model using the `eval()` function. This approach improves maintainability and separation of concerns:

```