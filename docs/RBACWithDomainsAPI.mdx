---
id: rbac-with-domains-api
title: RBAC with Domains API
description: A more user-friendly API for RBAC with domains. This API is a subset of the Management API. RBAC users can use this API to simplify their code.
keywords: [RBAC with domains, API]
authors: [hsluoyz]
---

Convenience API for [RBAC with domains](/docs/rbac-with-domains): user–role and permission operations scoped by domain. It is a subset of the [Management API](/docs/management-api). Below, `e` is an Enforcer instance loaded with a domain-aware model.

## Reference

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
e, err := NewEnforcer("examples/rbac_with_domains_model.conf", "examples/rbac_with_domains_policy.csv")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
const e = await newEnforcer('examples/rbac_with_domains_model.conf', 'examples/rbac_with_domains_policy.csv')
```

```mdx-code-block
</TabItem>
<TabItem value="PHP" label="PHP">
```

```php
$e = new Enforcer('examples/rbac_with_domains_model.conf', 'examples/rbac_with_domains_policy.csv');
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
e = casbin.Enforcer("examples/rbac_with_domains_model.conf", "examples/rbac_with_domains_policy.csv")
```

```mdx-code-block
</TabItem>
<TabItem value=".NET" label=".NET">
```

```csharp
var e = new Enforcer("examples/rbac_with_domains_model.conf", "examples/rbac_with_domains_policy.csv");
```

```mdx-code-block
</TabItem>
<TabItem value="Rust" label="Rust">
```

```rust
let mut e = Enforcer::new("examples/rbac_with_domains_model.conf", "examples/rbac_with_domains_policy.csv").await?;
```

```mdx-code-block
</TabItem>
<TabItem value="Java" label="Java">
```

```java
Enforcer e = new Enforcer("examples/rbac_with_domains_model.conf", "examples/rbac_with_domains_policy.csv");
```

```mdx-code-block
</TabItem>
</Tabs>
```

### GetUsersForRoleInDomain

Returns all users that have the given role in the given domain.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
res := e.GetUsersForRoleInDomain("admin", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
const res = e.getUsersForRoleInDomain("admin", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
res = e.get_users_for_role_in_domain("admin", "domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### GetRolesForUserInDomain

Returns all roles assigned to the user in the given domain.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
res := e.GetRolesForUserInDomain("alice", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Node.js" label="Node.js">
```

```typescript
const res = e.getRolesForUserInDomain("alice", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
res = e.get_roles_for_user_in_domain("alice", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Java" label="Java">
```

```java
List<String> res = e.getRolesForUserInDomain("admin", "domain1");
```

```mdx-code-block
</TabItem>
</Tabs>
```

### GetPermissionsForUserInDomain

Returns all permissions (policy rules) for the user or role in the given domain.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
res := e.GetPermissionsForUserInDomain("alice", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Java" label="Java">
```

```java
List<List<String>> res = e.getPermissionsForUserInDomain("alice", "domain1");
```

```mdx-code-block
</TabItem>
</Tabs>
```

### AddRoleForUserInDomain

Assigns the role to the user in the domain. Returns `false` if the assignment already exists.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
ok, err := e.AddRoleForUserInDomain("alice", "admin", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Python" label="Python">
```

```python
ok = e.add_role_for_user_in_domain("alice", "admin", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Java" label="Java">
```

```java
boolean ok = e.addRoleForUserInDomain("alice", "admin", "domain1");
```

```mdx-code-block
</TabItem>
</Tabs>
```

### DeleteRoleForUserInDomain

Removes the role from the user in the domain. Returns `false` if the link did not exist.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
ok, err := e.DeleteRoleForUserInDomain("alice", "admin", "domain1")
```

```mdx-code-block
</TabItem>
<TabItem value="Java" label="Java">
```

```java
boolean ok = e.deleteRoleForUserInDomain("alice", "admin", "domain1");
```

```mdx-code-block
</TabItem>
</Tabs>
```

### DeleteRolesForUserInDomain

Removes all roles from the user in the domain. Returns `false` if the user had no roles there.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
ok, err := e.DeleteRolesForUserInDomain("alice", "domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### GetAllUsersByDomain

Returns all users that have at least one role in the given domain. Empty if the model has no domain.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
res := e.GetAllUsersByDomain("domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### DeleteAllUsersByDomain

Removes all user–role assignments in the given domain. Returns `false` if the model has no domain.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
ok, err := e.DeleteAllUsersByDomain("domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### DeleteDomains

Removes all users and roles for the given domains. With no arguments, clears all domains.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
ok, err := e.DeleteDomains("domain1", "domain2")
```

```mdx-code-block
</TabItem>
</Tabs>
```

### GetAllDomains

Returns all domains that appear in the policy.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
res, _ := e.GetAllDomains()
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::caution
Do not use `::` in domain names; it is reserved in Casbin’s expression syntax.
:::

### GetAllRolesByDomain

Returns all roles that appear in the given domain.

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
res := e.GetAllRolesByDomain("domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::note
Does not include roles inherited via hierarchy (implicit roles); only direct assignments in the domain.
:::

### GetImplicitUsersForResourceByDomain

Returns the implicit users (and their permissions) for the given resource and domain—i.e. users who have permission on the resource in that domain via their roles.

```csv
p, admin, domain1, data1, read
p, admin, domain1, data1, write
p, admin, domain2, data2, read
p, admin, domain2, data2, write
g, alice, admin, domain1
g, bob, admin, domain2
```

Example: with the policy below, `GetImplicitUsersForResourceByDomain("data1", "domain1")` returns the permissions for users who can access `data1` in `domain1` (e.g. alice via role admin).

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
ImplicitUsers, err := e.GetImplicitUsersForResourceByDomain("data1", "domain1")
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::note
Only user-level results are returned; role names (the second element in `g` rules) are not listed.
:::
