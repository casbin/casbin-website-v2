---
id: effector
title: Effector
description: Interface for merging policy evaluation results into final authorization decisions
keywords: [effector, policy effect, MergeEffects, authorization decision, policy evaluation]
authors: [ErikQQY]
---

The `Effect` type represents the result of evaluating individual policy rules, while the `Effector` interface merges these results into a final authorization decision.

## `MergeEffects()`

The `MergeEffects()` function combines all matching policy results collected by the Enforcer into a single authorization decision.

For example:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
effect, explainIndex, err := e.MergeEffects(expr, effects, matches, policyIndex, policyLength)
```

```mdx-code-block
</TabItem>
</Tabs>
```

In this example:  

- `effect` is the final authorization decision produced by merging results (initialized as `Indeterminate`).
- `explainIndex` indicates the index of the policy rule that determined the final decision (initialized to `-1` when no rule applies).
- `err` indicates if an unsupported effect type was encountered.
- `expr` is the policy effect expression string from the model configuration.
- `effects` is an array of effects, which can be `Allow`, `Indeterminate`, or `Deny`.
- `matches` is an array indicating which policy rules matched the request conditions.
- `policyIndex` is the current evaluation position within the policy rule list (used for incremental evaluation).
- `policyLength` is the total number of policy rules being evaluated.

The code above demonstrates how to use the parameters for `MergeEffects()`, which processes effects and matches according to the `expr`.

To use an `Effector`, follow these steps:

```mdx-code-block
<Tabs groupId="langs">
<TabItem value="Go" label="Go" default>
```

```go
var e Effector
effect, explainIndex, err := e.MergeEffects(expr, effects, matches, policyIndex, policyLength)
```

```mdx-code-block
</TabItem>
</Tabs>
```

The core logic of `MergeEffects()` is: if the `expr` matches results where `p.eft` is `allow`, all effects are merged. If no deny rules match, the decision is allow.

:::note

Short-circuit evaluation occurs when the `expr` doesn't use `priority(p.eft) || deny` and `policyIndex` < `policyLength-1`. This optimization stops evaluating subsequent policy rules once a definitive decision can be made, improving performance for large policy sets.

:::
