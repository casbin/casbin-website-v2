---
id: frontend
title: Frontend Usage
description: Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application
keywords: [Casbin.js, react-authz, rbac-react, vue-authz, angular-authz]
authors: [hsluoyz]
---


[Casbin.js](https://github.com/casbin/casbin.js) is a Casbin addon that facilitates access-control management in frontend applications.

## Installation

```bash
npm install casbin.js
npm install casbin
```

or

```bash
yarn add casbin.js
```

## Frontend Middlewares

| Middleware                                                  | Type    | Author                                 | Description                                                       |
|-------------------------------------------------------------|---------|----------------------------------------|-------------------------------------------------------------------|
| [react-authz](https://github.com/casbin-js/react-authz)     | React   | Casbin                                 | React wrapper for Casbin.js                                       |
| [rbac-react](https://github.com/daobeng/rbac-react)         | React   | [@daobeng](https://github.com/daobeng) | Role Based Access Control in React using HOCs, CASL and Casbin.js |
| [vue-authz](https://github.com/casbin-js/vue-authz)         | Vue     | Casbin                                 | Vue wrapper for Casbin.js                                         |
| [angular-authz](https://github.com/casbin-js/angular-authz) | Angular | Casbin                                 | Angular wrapper for Casbin.js                                     |

## Quick Start

You can use the `manual` mode in your frontend application and set permissions whenever you wish.

```javascript
const casbinjs = require("casbin.js");
// Set the user's permission:
// He/She can read `data1` and `data2` objects and can write `data1` object
const permission = {
    "read": ["data1", "data2"],
    "write": ["data1"]
}

// Run casbin.js in manual mode, which requires you to set the permission manually.
const authorizer = new casbinjs.Authorizer("manual");
```

Now you have an authorizer, `authorizer`. You can get permission rules from it by using the `authorizer.can()` and `authorizer.cannot()` APIs. The return values of these two APIs are JavaScript Promises ([details here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)), so you should use the `then()` method of the return value as follows:

```javascript
result = authorizer.can("write", "data1");
result.then((success, failed) => {
    if (success) {
        console.log("you can write data1");
    } else {
        console.log("you cannot write data1");
    }
});
// output: you can write data1
```

The `cannot()` API is used in the same way:

```javascript
result = authorizer.cannot("read", "data2");
result.then((success, failed) => {
    if (success) {
        console.log("you cannot read data2");
    } else {
        console.log("you can read data2");
    }
});
// output: you can read data2
```

In the code above, the `success` variable in the parameters means the request gets the result without throwing an error and does not mean that the permission rule is `true`. The `failed` variable is also unrelated to the permission rules. It only makes sense when something goes wrong in the process of the request.

You can refer to our [React example](https://github.com/casbin-js/examples) to see a practical usage of Casbin.js.

### Permission Object

Casbin.js accepts a JSON object to manipulate the corresponding permissions of a visitor. For example:

```json
{
    "read": ["data1", "data2"],
    "write": ["data1"]
}
```

The permission object above shows that the visitor can `read` the `data1` and `data2` objects, while they can only `write` the `data1` object.

## Advanced Usage

Casbin.js provides a robust solution for integrating frontend access-control management with your backend Casbin service.

Use the `auto` mode and specify your endpoint when initializing the Casbin.js `Authorizer`. It will automatically sync permissions and manipulate the frontend status.

```javascript
const casbinjs = require('casbin.js');

// Set your backend Casbin service URL
const authorizer = new casbinjs.Authorizer(
    'auto', // mode
    {endpoint: 'http://your_endpoint/api/casbin'}
);

// Set your visitor.
// Casbin.js will automatically sync the permission with your backend Casbin service.
authorizer.setUser("Tom");

// Evaluate the permission
result = authorizer.can("read", "data1");
result.then((success, failed) => {
    if (success) {
        // Some frontend procedure ...
    }
});
```

Correspondingly, you need to expose an interface (e.g., a REST API) to generate the permission object and pass it to the frontend. In your API controller, call `CasbinJsGetUserPermission` to construct the permission object. Here is an example in Beego:

:::note

Your endpoint server should return something like:

```json
{
    "other":"other",
    "data": "What you get from `CasbinJsGetPermissionForUser`"
}
```

:::

:::note

Currently, the `CasbinJsGetPermissionForUser` API is only supported in Go Casbin and Node-Casbin. If you want this API to be supported in other languages, please [raise an issue](https://github.com/casbin/casbin.js/issues) or leave a comment below.

:::

## API List

### `setPermission(permission: string)`

Set the permission object. Always used in `manual` mode.

### `setUser(user: string)`

Set the visitor identity and update the permission. Always used in `auto` mode.

### `can(action: string, object: string)`

Check if the user can perform `action` on `object`.

### `cannot(action: string, object: string)`

Check if the user **cannot** perform `action` on `object`.

### `canAll(action: string, objects: Array<object>)`

Check if the user can perform `action` on **all** objects in `objects`.

### `canAny(action: string, objects: Array<object>)`

Check if the user can perform `action` on **any one** of the `objects`.

## Why Casbin.js

People may wonder about the difference between Node-Casbin and Casbin.js. In short, Node-Casbin is the core of Casbin implemented in the Node.js environment, and it's normally used as an access-control management toolkit on the server side. Casbin.js is a frontend library that helps you use Casbin to authorize your webpage users on the client side.

Normally, it is not recommended to directly build a Casbin service and perform authorization/enforcement tasks in a web frontend application due to the following problems:

1. When someone opens the client, the enforcer will be initialized, and it will pull all the policies from the backend persistent layers. High concurrency could put significant pressure on the databases and consume a lot of network throughput.
2. Loading all policies to the client side could introduce security risks.
3. It is difficult to separate the client and server as well as facilitate agile development.

We need a tool that simplifies the process of using Casbin on the frontend. Actually, the core of Casbin.js is the manipulation of the current user's permissions on the client side. As mentioned, Casbin.js fetches from a specified endpoint. This procedure will sync the user's permissions with the backend Casbin service. After obtaining the permission data, developers can use Casbin.js interfaces to manage user behavior on the frontend.

Casbin.js avoids the two problems mentioned above: the Casbin service will no longer be repeatedly initialized, and the size of messages passed between the client and server is reduced. We also avoid storing all the policies on the frontend. The user can only access their own permissions, but has no knowledge about the access-control model or other users' permissions. Besides, Casbin.js can also efficiently decouple the client and server in authorization management.
